{{BOLD}}ergo{{RESET}} — fast, minimal plan tracker (tasks + epics + deps). safe for parallel agents.

{{HEADER}}USAGE{{RESET}}
  ergo [global flags] <command> [args]

{{HEADER}}COMMANDS{{RESET}}
  init [dir]                              create .ergo/ in dir (arg overrides --dir)

  new epic <title>                        create epic (prints ID) [title required]
  new task <title> [--epic <id>]          create task (prints ID) [title required]

  list [--epic <id>] [--ready|--blocked] [--epics] [--tree]
                                          list tasks (default: all)
                                          --tree: hierarchical view with status icons and deps
                                          --epics shows epic summaries too
                                          --as applies only with --ready/--blocked. use --json for agents.
  show <id>                               show epic or task details. respects --json.

  next [--epic <id>] [--peek]             (atomic) pick oldest READY task, claim, set doing, print title+body
                                          filters: --epic and --as apply. --peek does not claim.
                                          exit code 3 if no READY task.

  set <id> key=value [key=value ...]      update fields (see KEYS). rejects empty title.
  dep <A> <B>                             add dependency: A depends on B (B blocks A). rejects cycles.
                                          tasks can depend on tasks; epics can depend on epics.
  dep rm <A> <B>                          remove dependency

  where                                   print active .ergo directory path
  compact                                 rewrite log to current state (drops history)
  quickstart                              guided walkthrough

{{HEADER}}GLOBAL FLAGS{{RESET}}
  --dir <path>                            discovery start dir (or explicit .ergo dir)
  --as <any|agent|human>                  filter READY/BLOCKED and next (default: any)
  --agent <id>                            claim identity (default: username@hostname)
  --json                                  JSON output (default: text), recommended for agents
  --readonly                              block commands that write
  --lock-timeout <duration>               default 30s; 0 = fail fast
  -h, --help                              show help
  -V, --version                           print version

{{HEADER}}KEYS (for 'set'){{RESET}}
  Common:
    title=<text>                          required; cannot be cleared
    body=@-                               read body from stdin

  Task-only:
    epic=<epic_id> | epic=                assign / unassign
    worker=any|agent|human
    state=todo|doing|done|blocked|canceled|error
                                          doing/error require claim; todo/done/canceled clear claim
    claim=<agent_id>                      set claim and (by default) state=doing
    claim=                                clear claim (no state change)

  Result (task-only, both required together):
    result.path=<relpath>                 path to result file (relative to project root; must exist)
    result.summary=<text>                 one-line summary (max 120 chars)
                                          ergo records sha256 and git commit at attach time

  Epic-only:
    (epics ignore state/worker/claim — use epic-deps instead)