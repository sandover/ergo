{{BOLD}}ergo{{RESET}} â€” fast, concurrency-safe task orchestration for agents. humans welcome.

{{HEADER}}USAGE{{RESET}}
  ergo <command> [args] [global flags]   (Global flags can appear anywhere.)

{{HEADER}}COMMANDS{{RESET}}
  init [dir]                              create .ergo/ in dir (default: .)

  new epic                                create epic (JSON stdin; or --body-stdin)
  new task                                create task (JSON stdin; or --body-stdin)
  set <id>                                update task/epic (JSON stdin; or --body-stdin)
  show <id>                               show epic or task details

  list [--epic <id>] [--ready] [--epics] [--all]
                                          list active tasks
                                          --all includes done and canceled
                                          --epics shows only epics

  claim [<id>] --agent <identity> [--epic <id>]
                                          claim oldest ready task, or by ID
                                          sets to "doing"; --agent required
                                          if none ready: prints message, exit 0

  sequence <A> <B> [<C>...]               enforce order A then B then C
  sequence rm <A> <B>                     remove edge where B depends on A

  where                                   print active .ergo directory path
  prune [--yes] [--json]                  remove done/canceled tasks + empty epics
                                          default dry-run; run with --yes to apply
  compact                                 collapse log to current state
  quickstart                              complete reference manual

{{HEADER}}GLOBAL FLAGS{{RESET}}
  --dir <path>                            discovery start (or .ergo path)
  --agent <identity>                      identity for claim and implicit set
  --json                                  JSON output (required for agents)
  --quiet, -q                             suppress output
  --verbose, -v                           verbose output
  -h, --help                              show help
  -V, --version                           print version

{{HEADER}}COMMON FLAGS (new/set){{RESET}}
  --body-stdin                            read body from stdin (raw text); other fields via flags
  --title <text>                          set title (required for new * with --body-stdin)
  --body <text>                           inline body text (mutually exclusive with --body-stdin)
  --epic <id>                             assign to epic ("" unassign only via JSON)
  --state <state>                         set state (todo|doing|done|blocked|canceled|error)
  --claim <agent>                         set claim ("" unclaim only via JSON)
  --result-path <path>                    attach result file path (requires --result-summary)
  --result-summary <text>                 attach one-line result summary (requires --result-path)

{{HEADER}}JSON INPUT FIELDS (all strings){{RESET}}
  Unknown keys are rejected (with suggestions for close matches).
  Epics only support: title, body
  title           required for new, optional for set
  body            optional details (omit if empty)
  epic            epic ID or "" to unassign
  state           (tasks only) todo|doing|done|blocked|canceled|error
                  doing/error require claim; todo/done/canceled clear claim
  claim           (tasks only) agent ID or "" to unclaim
                  claim implies state=doing (unless state provided)
                  state=doing/error on unclaimed needs --agent or claim
  result_path     file path (requires result_summary)
  result_summary  one-liner (requires result_path)

{{HEADER}}FOR AGENTS{{RESET}}
  ALWAYS use --json for structured output.
  Mutating commands return a JSON object when --json is set.
  ALWAYS pass --agent when claiming (e.g. haiku@agent-host).
  ALWAYS set done, blocked, error, or canceled when finished (never leave doing).
  For multiline bodies, prefer --body-stdin (stdin is the literal body text).
  Before starting, run 'ergo quickstart' for the complete reference.
